diff --git a/fixincludes/mkfixinc.sh b/fixincludes/mkfixinc.sh
index a52333b2a..490dc4db3 100755
--- a/fixincludes/mkfixinc.sh
+++ b/fixincludes/mkfixinc.sh
@@ -14,7 +14,7 @@ case $machine in
     i?86-*-cygwin* | \
     i?86-*-mingw32* | \
     x86_64-*-mingw32* | \
-    *os_2-* | \
+    *-os_2* | \
     powerpc-*-eabisim* | \
     powerpc-*-eabi*    | \
     powerpc-*-rtems*   | \
diff --git a/gcc/config.gcc b/gcc/config.gcc
index d7afa9b0b..a5cf88a04 100644
--- a/gcc/config.gcc
+++ b/gcc/config.gcc
@@ -1497,6 +1497,7 @@ i[34567]86-*-os_2*)
     ;;
 x86_64-*-os_2*)
     tm_file="${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h glibc-stdint.h i386/i386elf.h i386/x86-64.h os_2.h"
+    extra_options="${extra_options} gnu-user.opt"
     ;;
 hppa[12]*-*-hpux10*)
 	case ${target} in
diff --git a/gcc/config/os_2.h b/gcc/config/os_2.h
index 509f29e8d..f3f1b6133 100644
--- a/gcc/config/os_2.h
+++ b/gcc/config/os_2.h
@@ -2,16 +2,20 @@
 #define TARGET_OS_2 1
 
 #undef LIB_SPEC
-#define LIB_SPEC "-lc"
+#define LIB_SPEC "%{pthread:-lpthread} %{!shared:-lc}"
 
 #undef STARTFILE_SPEC
-#define STARTFILE_SPEC "crt0.o%s crti.o%s crtbegin.o%s"
+#define STARTFILE_SPEC "%{!shared:crt0.o%s} crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}"
 
 #undef ENDFILE_SPEC
-#define ENDFILE_SPEC "crtend.o%s crtn.o%s"
+#define ENDFILE_SPEC "%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s"
+
+#define DYNAMIC_LINKER "/lib/loader.so"
 
 #undef LINK_SPEC
-#define LINK_SPEC "-z max-page-size=4096"
+#define LINK_SPEC                                                                                                         \
+    "%{shared:-shared} %{static:-static} -z max-page-size=4096 %{!shared:%{!static:-dynamic-linker " DYNAMIC_LINKER "}} " \
+    "%{!shared: %{!static: %{rdynamic:-export-dynamic}}}"
 
 #undef TARGET_OS_CPP_BUILTINS
 #define TARGET_OS_CPP_BUILTINS()        \
diff --git a/libgcc/config.host b/libgcc/config.host
index 4d08bed67..5edf70004 100644
--- a/libgcc/config.host
+++ b/libgcc/config.host
@@ -396,8 +396,8 @@ i[34567]86-*-os_2*)
 	tmake_file="$tmake_file i386/t-crtstuff t-crtstuff-pic t-libgcc-pic"
 	;;
 x86_64-*-os_2*)
-	extra_parts="$extra_parts crti.o crtbegin.o crtend.o crtn.o"
-	tmake_file="$tmake_file i386/t-crtstuff t-crtstuff-pic t-libgcc-pic"
+	extra_parts="$extra_parts crti.o crtbegin.o crtbeginS.o crtend.o crtendS.o crtn.o"
+	tmake_file="$tmake_file i386/t-crtstuff t-crtstuff-pic t-libgcc-pic t-slibgcc-libgcc"
 	;;
 amdgcn*-*-amdhsa)
 	tmake_file="$tmake_file gcn/t-amdgcn"
